{% extends 'common/base.html' %}
{% load static %}

{% block content %}

<form method="get" action="{% url 'search' %}" class="search-form">
    <input type="text" name="q" placeholder="–¢—ä—Ä—Å–∏ –ø—Ä–µ–∂–∏–≤—è–≤–∞–Ω–µ..." required>
    <button type="submit">üîç</button>
</form>

<div class="callen-logo">
    <div class="big_logo">
    <img src="{%static 'images/logo.png' %}" alt="OtidiDo Logo">
    <p>–î–æ–±—Ä–µ –¥–æ—à–ª–∏ –≤ OtidiDo. –ú—è—Å—Ç–æ—Ç–æ –∑–∞ –ø—ä—Ç–µ—à–µ—Å—Ç–≤–µ–Ω–∏—Ü–∏, –∫–æ–∏—Ç–æ –∏—Å–∫–∞—Ç –¥–∞ —Å–ø–æ–¥–µ–ª—è—Ç —Å–≤–æ—è –æ–ø–∏—Ç –≤ –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è—Ç–∞. </p>
    </div>
<div id="calendar">
    <h2>–ö–∞–ª–µ–Ω–¥–∞—Ä —Å –∏–¥–µ–∏</h2>
</div>
    </div>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    const calendarEl = document.getElementById('calendar');
    const calendar = new window.FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      locale: 'bg',  // –±—ä–ª–≥–∞—Ä—Å–∫–∏ –µ–∑–∏–∫
      events: [
        {% for idea in all_ideas %}
        {
          title: '{{ idea.title }}',
          start: '{{ idea.date_event|date:"Y-m-d" }}',
          url: '{% url "idea_detail" idea.pk %}'
        },
        {% endfor %}
      ],
    });
    calendar.render();
  });

</script>

<h2>–ù–∞–π-—Ö–∞—Ä–µ—Å–≤–∞–Ω–∏ –∏–¥–µ–∏</h2>
<div class="ideas-grid">

    {% for idea in top_ideas %}
    <div class="idea-card top">
        <a href="{% url 'idea_detail' idea.pk %}">
            {% if idea.image %}
            <img src="{{ idea.image.url }}" alt="–°–Ω–∏–º–∫–∞ –Ω–∞ {{ idea.title }}">
            {% else %}
            <img src="{% static 'images/default.jpg' %}" alt="–ù—è–º–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">
            {% endif %}
            <h3>{{idea.title}}</h3>
        </a>
        <p>{{ idea.num_likes }} ‚ù§Ô∏è</p>
    </div>
    {% empty %}
    <p>–í—Å–µ –æ—â–µ –Ω—è–º–∞ –ø–æ–ø—É–ª—è—Ä–Ω–∏ –∏–¥–µ–∏.</p>
    {% endfor %}
</div>

{% endblock %}
