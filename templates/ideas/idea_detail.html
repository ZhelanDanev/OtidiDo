{% extends 'common/base.html' %}

{% block content %}

<h2 class="head2">{{ idea.title }}</h2>
<p>{{ idea.description }}</p>
<p>–ì—Ä–∞–¥: {{ idea.city }}</p>
{% if idea.date_event %}
<p>–î–∞—Ç–∞ –Ω–∞ —Å—ä–±–∏—Ç–∏–µ—Ç–æ: {{ idea.date_event }}</p>
<p>–ò–¥–µ—è –æ—Ç:
    <a href="{% url 'profile_detail' idea.user.pk %}">
        {{ idea.user.user.username }}
    </a>
</p>
{% endif %}

{% if idea.image %}
<img src="{{ idea.image.url }}" alt="–°–Ω–∏–º–∫–∞" class="uploaded-image"/>
{% endif %}

<!-- Like –±—É—Ç–æ–Ω -->
<form method="post" action="{% url 'like_idea' idea.pk %}">
    {% csrf_token %}
    <button type="submit">
        {% if liked %}üíî Unlike{% else %}‚ù§Ô∏è Like{% endif %}
    </button>
    {{ like_count }} —Ö–∞—Ä–µ—Å–≤–∞–Ω–∏—è
</form>

{% if idea.user == request.user.traveler %}
<a href="{% url 'edit_idea' idea.pk %}" class="btn btn-primary">–†–µ–¥–∞–∫—Ç–∏—Ä–∞–π –∏–¥–µ—è</a>
<a href="{% url 'delete_idea' idea.pk %}" class="delete-btn">–ò–∑—Ç—Ä–∏–π –∏–¥–µ—è</a>
{% endif %}


<div class="comments-section">
    <h3>–ö–æ–º–µ–Ω—Ç–∞—Ä–∏</h3>

    {% if comments %}
    <ul class="comment-list">
        {% for comment in comments %}
        <li class="comment-item">
            <div class="comment-author">
                <strong>{{ comment.user.user.username }}</strong>
                <span class="comment-date"> ‚Äî {{ comment.created_at|date:"d.m.Y H:i" }}</span>
            </div>
            <div class="comment-text">{{ comment.text }}</div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
    <p>–í—Å–µ –æ—â–µ –Ω—è–º–∞ –∫–æ–º–µ–Ω—Ç–∞—Ä–∏.</p>
    {% endif %}

    {% if user.is_authenticated %}
    <div class="comment-form">
        <h4>–û—Å—Ç–∞–≤–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä</h4>
        <form method="post">
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">–ò–∑–ø—Ä–∞—Ç–∏</button>
        </form>
    </div>
    {% else %}
    <p><a href="{% url 'login' %}">–í–ª–µ–∑</a>, –∑–∞ –¥–∞ –æ—Å—Ç–∞–≤–∏—à –∫–æ–º–µ–Ω—Ç–∞—Ä.</p>
    {% endif %}
</div>


<!--</div>-->
{% endblock %}
